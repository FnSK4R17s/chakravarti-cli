# Chakravarti Makefile
# Auto-generated by ckrv init

.PHONY: up down status chat gitlab-status worktree-setup worktree-list help

# Default target
help:
	@echo "Chakravarti Commands:"
	@echo ""
	@echo "  make up              - Start all services (GitLab, agents)"
	@echo "  make down            - Stop all services"
	@echo "  make status          - Show project status"
	@echo "  make chat            - Start chat with planner"
	@echo ""
	@echo "  make gitlab-status   - Check GitLab health"
	@echo "  make gitlab-push     - Push to lab origin"
	@echo ""
	@echo "  make worktree-setup  - Create worktrees for executors"
	@echo "  make worktree-list   - List all worktrees"
	@echo ""

# === Environment ===
up:
	ckrv up

down:
	ckrv down

status:
	ckrv status

# === Agent Chat ===
chat:
	ckrv chat

chat-planner:
	ckrv chat --agent planner

# === GitLab ===
gitlab-status:
	ckrv gitlab status

gitlab-start:
	ckrv gitlab start

gitlab-stop:
	ckrv gitlab stop

gitlab-push:
	git push lab master

gitlab-push-all:
	git push lab --all

# === Redis ===
redis-status:
	docker exec chakravarti-redis redis-cli ping

redis-cli:
	docker exec -it chakravarti-redis redis-cli

# === Worktrees ===
worktree-setup:
	ckrv worktree setup

worktree-list:
	ckrv worktree list

worktree-prune:
	ckrv worktree prune

# === Docker ===
docker-ps:
	docker ps --filter "name=ckrv-"

docker-logs-gitlab:
	docker logs chakravarti-gitlab --tail 50

docker-logs-%:
	docker logs ckrv-executor-$* --tail 50

# === Quick Actions ===
init:
	ckrv init

check:
	ckrv check
